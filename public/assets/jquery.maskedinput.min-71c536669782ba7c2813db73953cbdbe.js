/*
	Masked Input plugin for jQuery
	Copyright (c) 2007-2013 Josh Bush (digitalbush.com)
	Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)
	Version: 1.3.1
*/
!function(t){function e(){var t=document.createElement("input"),e="onpaste";return t.setAttribute(e,""),"function"==typeof t[e]?"paste":"input"}var i,n=e()+".mask",s=navigator.userAgent,o=/iphone/i.test(s),r=/android/i.test(s);t.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},t.fn.extend({caret:function(t,e){var i;return 0===this.length||this.is(":hidden")?void 0:"number"==typeof t?(e="number"==typeof e?e:t,this.each(function(){this.setSelectionRange?this.setSelectionRange(t,e):this.createTextRange&&(i=this.createTextRange(),i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",t),i.select())})):(this[0].setSelectionRange?(t=this[0].selectionStart,e=this[0].selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),t=0-i.duplicate().moveStart("character",-1e5),e=t+i.text.length),{begin:t,end:e})},unmask:function(){return this.trigger("unmask")},mask:function(e,s){var a,l,h,c,u,d;return!e&&this.length>0?(a=t(this[0]),a.data(t.mask.dataName)()):(s=t.extend({placeholder:t.mask.placeholder,completed:null},s),l=t.mask.definitions,h=[],c=d=e.length,u=null,t.each(e.split(""),function(t,e){"?"==e?(d--,c=t):l[e]?(h.push(RegExp(l[e])),null===u&&(u=h.length-1)):h.push(null)}),this.trigger("unmask").each(function(){function a(t){for(;d>++t&&!h[t];);return t}function p(t){for(;--t>=0&&!h[t];);return t}function f(t,e){var i,n;if(!(0>t)){for(i=t,n=a(e);d>i;i++)if(h[i]){if(!(d>n&&h[i].test(C[n])))break;C[i]=C[n],C[n]=s.placeholder,n=a(n)}y(),x.caret(Math.max(u,t))}}function m(t){var e,i,n,o;for(e=t,i=s.placeholder;d>e;e++)if(h[e]){if(n=a(e),o=C[e],C[e]=i,!(d>n&&h[n].test(o)))break;i=o}}function g(t){var e,i,n,s=t.which;8===s||46===s||o&&127===s?(e=x.caret(),i=e.begin,n=e.end,0===n-i&&(i=46!==s?p(i):n=a(i-1),n=46===s?a(n):n),b(i,n),f(i,n-1),t.preventDefault()):27==s&&(x.val(_),x.caret(0,w()),t.preventDefault())}function v(e){var i,n,o,l=e.which,c=x.caret();e.ctrlKey||e.altKey||e.metaKey||32>l||l&&(0!==c.end-c.begin&&(b(c.begin,c.end),f(c.begin,c.end-1)),i=a(c.begin-1),d>i&&(n=String.fromCharCode(l),h[i].test(n)&&(m(i),C[i]=n,y(),o=a(i),r?setTimeout(t.proxy(t.fn.caret,x,o),0):x.caret(o),s.completed&&o>=d&&s.completed.call(x))),e.preventDefault())}function b(t,e){var i;for(i=t;e>i&&d>i;i++)h[i]&&(C[i]=s.placeholder)}function y(){x.val(C.join(""))}function w(t){var e,i,n=x.val(),o=-1;for(e=0,pos=0;d>e;e++)if(h[e]){for(C[e]=s.placeholder;pos++<n.length;)if(i=n.charAt(pos-1),h[e].test(i)){C[e]=i,o=e;break}if(pos>n.length)break}else C[e]===n.charAt(pos)&&e!==c&&(pos++,o=e);return t?y():c>o+1?(x.val(""),b(0,d)):(y(),x.val(x.val().substring(0,o+1))),c?e:u}var x=t(this),C=t.map(e.split(""),function(t){return"?"!=t?l[t]?s.placeholder:t:void 0}),_=x.val();x.data(t.mask.dataName,function(){return t.map(C,function(t,e){return h[e]&&t!=s.placeholder?t:null}).join("")}),x.attr("readonly")||x.one("unmask",function(){x.unbind(".mask").removeData(t.mask.dataName)}).bind("focus.mask",function(){clearTimeout(i);var t;_=x.val(),t=w(),i=setTimeout(function(){y(),t==e.length?x.caret(0,t):x.caret(t)},10)}).bind("blur.mask",function(){w(),x.val()!=_&&x.change()}).bind("keydown.mask",g).bind("keypress.mask",v).bind(n,function(){setTimeout(function(){var t=w(!0);x.caret(t),s.completed&&t==x.val().length&&s.completed.call(x)},0)}),w()}))}})}(jQuery);