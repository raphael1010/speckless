/* Copyright (C) 2013 Justin Windle, http://soulwire.co.uk */
var Sketch=function(){"use strict";function t(t){return"[object Array]"==Object.prototype.toString.call(t)}function e(t){return"function"==typeof t}function i(t){return"number"==typeof t}function n(t){return"string"==typeof t}function s(t){return x[t]||String.fromCharCode(t)}function o(t,e,i){for(var n in e)!i&&n in t||(t[n]=e[n]);return t}function r(t,e){return function(){t.apply(e,arguments)}}function a(t){var i={};for(var n in t)i[n]=e(t[n])?r(t[n],t):t[n];return i}function l(t){function i(i){e(i)&&i.apply(t,[].splice.call(arguments,1))}function r(t){for(z=0;z<K.length;z++)$=K[z],n($)?M[(t?"add":"remove")+"EventListener"].call(M,$,D,!1):e($)?D=$:M=$}function l(){A(E),E=P(l),Y||(i(t.setup),Y=e(t.setup),i(t.resize)),t.running&&!U&&(t.dt=(I=+new Date)-t.now,t.millis+=t.dt,t.now=I,i(t.update),t.autoclear&&Q&&t.clear(),i(t.draw)),U=++U%t.interval}function h(){M=X?t.style:t.canvas,L=X?"px":"",t.fullscreen&&(t.height=y.innerHeight,t.width=y.innerWidth),M.height=t.height+L,M.width=t.width+L,t.retina&&Q&&V&&(M.height=t.height*V,M.width=t.width*V,M.style.height=t.height+"px",M.style.width=t.width+"px",t.scale(V,V)),Y&&i(t.resize)}function c(t,e){return F=e.getBoundingClientRect(),t.x=t.pageX-F.left-y.scrollX,t.y=t.pageY-F.top-y.scrollY,t}function u(e,i){return c(e,t.element),i=i||{},i.ox=i.x||e.x,i.oy=i.y||e.y,i.x=e.x,i.y=e.y,i.dx=i.x-i.ox,i.dy=i.y-i.oy,i}function d(t){if(t.preventDefault(),H=a(t),H.originalEvent=t,H.touches)for(q.length=H.touches.length,z=0;z<H.touches.length;z++)q[z]=u(H.touches[z],q[z]);else q.length=0,q[0]=u(H,G);return o(G,q[0],!0),H}function p(e){for(e=d(e),j=(B=K.indexOf(O=e.type))-1,t.dragging=/down|start/.test(O)?!0:/up|end/.test(O)?!1:t.dragging;j;)n(K[j])?i(t[K[j--]],e):n(K[B])?i(t[K[B++]],e):j=0}function m(e){R=e.keyCode,W="keyup"==e.type,Z[R]=Z[s(R)]=!W,i(t[e.type],e)}function w(e){t.autopause&&("blur"==e.type?_:C)(),i(t[e.type],e)}function C(){t.now=+new Date,t.running=!0}function _(){t.running=!1}function k(){(t.running?_:C)()}function T(){Q&&t.clearRect(0,0,t.width,t.height)}function S(){N=t.element.parentNode,z=b.indexOf(t),N&&N.removeChild(t.element),~z&&b.splice(z,1),r(!1),_()}var E,D,M,N,F,z,L,I,$,H,O,R,W,j,B,U=0,q=[],Y=!1,V=y.devicePixelRatio,X=t.type==g,Q=t.type==f,G={x:0,y:0,ox:0,oy:0,dx:0,dy:0},K=[t.element,p,"mousedown","touchstart",p,"mousemove","touchmove",p,"mouseup","touchend",p,"click",v,m,"keydown","keyup",y,w,"focus","blur",h,"resize"],Z={};for(R in x)Z[x[R]]=!1;return o(t,{touches:q,mouse:G,keys:Z,dragging:!1,running:!1,millis:0,now:0/0,dt:0/0,destroy:S,toggle:k,clear:T,start:C,stop:_}),b.push(t),t.autostart&&C(),r(!0),h(),l(),t}for(var h,c,u="E LN10 LN2 LOG2E LOG10E PI SQRT1_2 SQRT2 abs acos asin atan ceil cos exp floor log round sin sqrt tan atan2 pow max min".split(" "),d="__hasSketch",p=Math,f="canvas",m="webgl",g="dom",v=document,y=window,b=[],w={fullscreen:!0,autostart:!0,autoclear:!0,autopause:!0,container:v.body,interval:1,globals:!0,retina:!1,type:f},x={8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",27:"ESCAPE",32:"SPACE",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN"},C={CANVAS:f,WEB_GL:m,WEBGL:m,DOM:g,instances:b,install:function(e){if(!e[d]){for(var n=0;n<u.length;n++)e[u[n]]=p[u[n]];o(e,{TWO_PI:2*p.PI,HALF_PI:p.PI/2,QUATER_PI:p.PI/4,random:function(e,n){return t(e)?e[~~(p.random()*e.length)]:(i(n)||(n=e||1,e=0),e+p.random()*(n-e))},lerp:function(t,e,i){return t+i*(e-t)},map:function(t,e,i,n,s){return(t-e)/(i-e)*(s-n)+n}}),e[d]=!0}},create:function(t){return t=o(t||{},w),t.globals&&C.install(self),h=t.element=t.element||v.createElement(t.type===g?"div":"canvas"),c=t.context=t.context||function(){switch(t.type){case f:return h.getContext("2d",t);case m:return h.getContext("webgl",t)||h.getContext("experimental-webgl",t);case g:return h.canvas=h}}(),(t.container||v.body).appendChild(h),C.augment(c,t)},augment:function(t,e){return e=o(e||{},w),e.element=t.canvas||t,e.element.className+=" sketch",o(t,e,!0),l(t)}},_=["ms","moz","webkit","o"],k=self,T=0,S="AnimationFrame",E="request"+S,D="cancel"+S,P=k[E],A=k[D],M=0;M<_.length&&!P;M++)P=k[_[M]+"Request"+S],A=k[_[M]+"Cancel"+S];return k[E]=P=P||function(t){var e=+new Date,i=p.max(0,16-(e-T)),n=setTimeout(function(){t(e+i)},i);return T=e+i,n},k[D]=A=A||function(t){clearTimeout(t)},C}();