/*
 *  Copyright 2011 Twitter, Inc.
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
var Hogan={};!function(t,e){function i(t){return String(null===t||void 0===t?"":t)}function n(t){return t=i(t),h.test(t)?t.replace(s,"&amp;").replace(o,"&lt;").replace(r,"&gt;").replace(a,"&#39;").replace(l,"&quot;"):t}t.Template=function(t,i,n,s){this.r=t||this.r,this.c=n,this.options=s,this.text=i||"",this.buf=e?[]:""},t.Template.prototype={r:function(){return""},v:n,t:i,render:function(t,e,i){return this.ri([t],e||{},i)},ri:function(t,e,i){return this.r(t,e,i)},rp:function(t,e,i,n){var s=i[t];return s?(this.c&&"string"==typeof s&&(s=this.c.compile(s,this.options)),s.ri(e,i,n)):""},rs:function(t,e,i){var n=t[t.length-1];if(!c(n))return void i(t,e,this);for(var s=0;s<n.length;s++)t.push(n[s]),i(t,e,this),t.pop()},s:function(t,e,i,n,s,o,r){var a;return c(t)&&0===t.length?!1:("function"==typeof t&&(t=this.ls(t,e,i,n,s,o,r)),a=""===t||!!t,!n&&a&&e&&e.push("object"==typeof t?t:e[e.length-1]),a)},d:function(t,e,i,n){var s=t.split("."),o=this.f(s[0],e,i,n),r=null;if("."===t&&c(e[e.length-2]))return e[e.length-1];for(var a=1;a<s.length;a++)o&&"object"==typeof o&&s[a]in o?(r=o,o=o[s[a]]):o="";return n&&!o?!1:(n||"function"!=typeof o||(e.push(r),o=this.lv(o,e,i),e.pop()),o)},f:function(t,e,i,n){for(var s=!1,o=null,r=!1,a=e.length-1;a>=0;a--)if(o=e[a],o&&"object"==typeof o&&t in o){s=o[t],r=!0;break}return r?(n||"function"!=typeof s||(s=this.lv(s,e,i)),s):n?!1:""},ho:function(t,e,i,n,s){var o=this.c,r=this.options;r.delimiters=s;var n=t.call(e,n);return n=null==n?String(n):n.toString(),this.b(o.compile(n,r).render(e,i)),!1},b:e?function(t){this.buf.push(t)}:function(t){this.buf+=t},fl:e?function(){var t=this.buf.join("");return this.buf=[],t}:function(){var t=this.buf;return this.buf="",t},ls:function(t,e,i,n,s,o,r){var a=e[e.length-1],l=null;if(!n&&this.c&&t.length>0)return this.ho(t,a,i,this.text.substring(s,o),r);if(l=t.call(a),"function"==typeof l){if(n)return!0;if(this.c)return this.ho(l,a,i,this.text.substring(s,o),r)}return l},lv:function(t,e,n){var s=e[e.length-1],o=t.call(s);return"function"==typeof o&&(o=i(o.call(s)),this.c&&~o.indexOf("{{"))?this.c.compile(o,this.options).render(s,n):i(o)}};var s=/&/g,o=/</g,r=/>/g,a=/\'/g,l=/\"/g,h=/[&<>\"\']/,c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}("undefined"!=typeof exports?exports:Hogan),function(t){function e(t){"}"===t.n.substr(t.n.length-1)&&(t.n=t.n.substring(0,t.n.length-1))}function i(t){return t.trim?t.trim():t.replace(/^\s*|\s*$/g,"")}function n(t,e,i){if(e.charAt(i)!=t.charAt(0))return!1;for(var n=1,s=t.length;s>n;n++)if(e.charAt(i+n)!=t.charAt(n))return!1;return!0}function s(t,e,i,n){for(var a=[],l=null,h=null;t.length>0;)if(h=t.shift(),"#"==h.tag||"^"==h.tag||o(h,n))i.push(h),h.nodes=s(t,h.tag,i,n),a.push(h);else{if("/"==h.tag){if(0===i.length)throw new Error("Closing tag without opener: /"+h.n);if(l=i.pop(),h.n!=l.n&&!r(h.n,l.n,n))throw new Error("Nesting error: "+l.n+" vs. "+h.n);return l.end=h.i,a}a.push(h)}if(i.length>0)throw new Error("missing closing tag: "+i.pop().n);return a}function o(t,e){for(var i=0,n=e.length;n>i;i++)if(e[i].o==t.n)return t.tag="#",!0}function r(t,e,i){for(var n=0,s=i.length;s>n;n++)if(i[n].c==t&&i[n].o==e)return!0}function a(t){return t.replace(w,"\\\\").replace(v,'\\"').replace(y,"\\n").replace(b,"\\r")}function l(t){return~t.indexOf(".")?"d":"f"}function h(t){for(var e="",i=0,n=t.length;n>i;i++){var s=t[i].tag;"#"==s?e+=c(t[i].nodes,t[i].n,l(t[i].n),t[i].i,t[i].end,t[i].otag+" "+t[i].ctag):"^"==s?e+=d(t[i].nodes,t[i].n,l(t[i].n)):"<"==s||">"==s?e+=u(t[i]):"{"==s||"&"==s?e+=p(t[i].n,l(t[i].n)):"\n"==s?e+=m('"\\n"'+(t.length-1==i?"":" + i")):"_v"==s?e+=f(t[i].n,l(t[i].n)):void 0===s&&(e+=m('"'+a(t[i])+'"'))}return e}function c(t,e,i,n,s,o){return"if(_.s(_."+i+'("'+a(e)+'",c,p,1),c,p,0,'+n+","+s+',"'+o+'")){_.rs(c,p,function(c,p,_){'+h(t)+"});c.pop();}"}function d(t,e,i){return"if(!_.s(_."+i+'("'+a(e)+'",c,p,1),c,p,1,0,0,"")){'+h(t)+"};"}function u(t){return'_.b(_.rp("'+a(t.n)+'",c,p,"'+(t.indent||"")+'"));'}function p(t,e){return"_.b(_.t(_."+e+'("'+a(t)+'",c,p,0)));'}function f(t,e){return"_.b(_.v(_."+e+'("'+a(t)+'",c,p,0)));'}function m(t){return"_.b("+t+");"}var g=/\S/,v=/\"/g,y=/\n/g,b=/\r/g,w=/\\/g,x={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};t.scan=function(t,s){function o(){v.length>0&&(y.push(new String(v)),v="")}function r(){for(var t=!0,e=C;e<y.length;e++)if(t=y[e].tag&&x[y[e].tag]<x._v||!y[e].tag&&null===y[e].match(g),!t)return!1;return t}function a(t,e){if(o(),t&&r())for(var i,n=C;n<y.length;n++)y[n].tag||((i=y[n+1])&&">"==i.tag&&(i.indent=y[n].toString()),y.splice(n,1));else e||y.push({tag:"\n"});b=!1,C=y.length}function l(t,e){var n="="+T,s=t.indexOf(n,e),o=i(t.substring(t.indexOf("=",e)+1,s)).split(" ");return k=o[0],T=o[1],s+n.length-1}var h=t.length,c=0,d=1,u=2,p=c,f=null,m=null,v="",y=[],b=!1,w=0,C=0,k="{{",T="}}";for(s&&(s=s.split(" "),k=s[0],T=s[1]),w=0;h>w;w++)p==c?n(k,t,w)?(--w,o(),p=d):"\n"==t.charAt(w)?a(b):v+=t.charAt(w):p==d?(w+=k.length-1,m=x[t.charAt(w+1)],f=m?t.charAt(w+1):"_v","="==f?(w=l(t,w),p=c):(m&&w++,p=u),b=w):n(T,t,w)?(y.push({tag:f,n:i(v),otag:k,ctag:T,i:"/"==f?b-T.length:w+k.length}),v="",w+=T.length-1,p=c,"{"==f&&("}}"==T?w++:e(y[y.length-1]))):v+=t.charAt(w);return a(b,!0),y},t.generate=function(e,i,n){var s='var _=this;_.b(i=i||"");'+h(e)+"return _.fl();";return n.asString?"function(c,p,i){"+s+";}":new t.Template(new Function("c","p","i",s),i,t,n)},t.parse=function(t,e,i){return i=i||{},s(t,"",[],i.sectionTags||[])},t.cache={},t.compile=function(t,e){e=e||{};var i=t+"||"+!!e.asString,n=this.cache[i];return n?n:(n=this.generate(this.parse(this.scan(t,e.delimiters),t,e),t,e),this.cache[i]=n)}}("undefined"!=typeof exports?exports:Hogan);